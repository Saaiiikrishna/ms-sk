# Bootstrap configuration for Spring Boot 3.x ZooKeeper integration
# This file is processed BEFORE application.yml and enables ZooKeeper configuration loading

spring:
  application:
    name: user-service
  cloud:
    # Temporarily disable Vault to test ZooKeeper isolation
    vault:
      enabled: false
    zookeeper:
      connect-string: zookeeper.mysillydreams-dev:2181
      config:
        enabled: true
        root: /config
        default-context: user-service
        profile-separator: ','
        fail-fast: true
      discovery:
        enabled: false
        register: false

# MINIMAL server configuration - port only
server:
  port: ${SERVER_PORT:8082}

# Enable debug mode for detailed startup information
debug: true

# Management endpoints for debugging
management:
  endpoints:
    web:
      exposure:
        include: "health,info,env,configprops,beans"
  endpoint:
    health:
      show-details: always

# DETAILED logging for debugging Spring Cloud Bootstrap
logging:
  level:
    root: ${ROOT_LOG_LEVEL:INFO}
    # Spring Cloud Bootstrap debugging
    org.springframework.cloud.bootstrap: DEBUG
    org.springframework.cloud.context: DEBUG
    org.springframework.cloud.config: DEBUG
    # ZooKeeper specific debugging
    org.springframework.cloud.zookeeper: DEBUG
    org.apache.curator: DEBUG
    org.apache.zookeeper: DEBUG
    # Vault debugging (if causing conflicts)
    org.springframework.cloud.vault: DEBUG
    org.springframework.vault: DEBUG
    # Configuration property source debugging
    org.springframework.core.env: DEBUG
    org.springframework.boot.context.config: DEBUG
